<div class="container">
	<% @user.milestone_tracks.each do |track| %>
		<div class="row" id="<%= track.id %>">
			<h4><%= track.name %></h4>
			<div class="line col-sm-11 milestone-track">
				<div class="circle milestone-marker"></div>
				<% track.milestones.each do |m| %>
					<% if m.completed %>
						<span class="glyphicon glyphicon-flag milestone-marker" id="<%= m.id %>"><p><%= m.name %></p></span>
					<% else %>
						<span class="glyphicon glyphicon-unchecked milestone-marker" id="<%= m.id %>"><p><%= m.name %></p></span>
					<% end %>
					<div class="circle milestone-marker"></div>
				<% end %>
				<hr/>
			</div>
			<div class="line col-sm-1">
				<span class="glyphicon glyphicon-certificate btn-lg"></span>
			</div>
		</div>
		<div class="progress">
			<p> Progress: <%= track.progress %> / <%= track.numeric_value %> </p>
			<span class="glyphicon glyphicon-plus add-progress" id="<%= track.id %>">Add Progress</span>
		</div>

		<!-- TODO: Make this be a button and make an AJAX request -->
		<%= form_for [track, @milestone] do |f| %>
			<div class="field">
				<%= f.label :"Name of new Milestone" %><br />
				<%= f.text_field :name, required: true %><br />
				<%= f.label :"Enter the goal to reach:" %><br />
				<%= f.number_field :progress, :value => track.numeric_value %>
				<%= f.hidden_field :track_id, :value => track.id %>
			</div>

			<div class="actions">
				<%= f.submit "Create new milestone" %>
			</div>

		<% end %>
	<% end %>
</div>
<hr />

<%= form_for [@user, @milestone_track] do |f| %>
	<div class="field">
		<%= f.label :"Name of new Milestone track" %><br />
		<%= f.text_field :name, required: true %><br />
		<%= f.label :"Number you want to reach: " %>
		<%= f.number_field :numeric_value, :value => 0 %>
	</div>

	<div class="actions">
		<%= f.submit "Create new track" %>
	</div>
<% end %>


<!-- Script for showing and displaying Milestones -->
<script>
	milestones();
	positionMilestones();
	addProgress();
</script>
